{"is_source_file": true, "format": "JavaScript", "description": "This file implements the service logic for managing notes in a simple notes application. It handles loading, saving, creating, updating, and deleting note objects stored in a JSON file, with in-memory caching for efficiency.", "external_files": ["fs", "path", "crypto"], "external_methods": ["fs.existsSync", "fs.mkdirSync", "fs.readFileSync", "fs.writeFileSync", "path.join", "crypto.randomUUID", "Date.prototype.toISOString"], "published": ["listNotes", "getNote", "createNote", "updateNote", "deleteNote"], "classes": [], "methods": [{"name": "ensureDataDir()", "description": "Ensures that the data directory exists; creates it if it does not.", "scope": "", "scopeKind": ""}, {"name": "loadNotes()", "description": "Loads notes from the JSON data file or initializes with seed data if the file does not exist.", "scope": "", "scopeKind": ""}, {"name": "saveNotes(notes)", "description": "Persists the current notes cache to the data file.", "scope": "", "scopeKind": ""}, {"name": "validateNotePayload(payload, isUpdate = false)", "description": "Validates the payload for creating or updating a note, ensuring required fields and constraints.", "scope": "", "scopeKind": ""}, {"name": "listNotes()", "description": "Returns all notes stored in memory.", "scope": "", "scopeKind": ""}, {"name": "getNote(id)", "description": "Retrieves a note by ID from the cache.", "scope": "", "scopeKind": ""}, {"name": "createNote(payload)", "description": "Creates a new note after validation and appends it to the cache, then saves.", "scope": "", "scopeKind": ""}, {"name": "updateNote(id, payload)", "description": "Updates an existing note's title and/or content, refreshes the updatedAt timestamp, and saves.", "scope": "", "scopeKind": ""}, {"name": "deleteNote(id)", "description": "Deletes a note by ID from the cache and persists the change.", "scope": "", "scopeKind": ""}], "calls": ["fs.existsSync", "fs.mkdirSync", "fs.readFileSync", "fs.writeFileSync", "path.join", "randomUUID", "new Date().toISOString()"], "search-terms": ["notes_backend", "notes.js", "loadNotes", "saveNotes", "createNote", "updateNote"], "state": 2, "file_id": 13, "knowledge_revision": 27, "git_revision": "", "ctags": [{"_type": "tag", "name": "DATA_DIR", "path": "/home/kavia/workspace/code-generation/simple-notes-application-45717-45726/notes_backend/src/services/notes.js", "pattern": "/^const DATA_DIR = path.join(__dirname, '..', '..', 'data');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "DATA_FILE", "path": "/home/kavia/workspace/code-generation/simple-notes-application-45717-45726/notes_backend/src/services/notes.js", "pattern": "/^const DATA_FILE = path.join(DATA_DIR, 'notes.json');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-application-45717-45726/notes_backend/src/services/notes.js", "pattern": "/^    content: payload.content,$/", "language": "JavaScript", "kind": "property", "scope": "createNote.note", "scopeKind": "class"}, {"_type": "tag", "name": "createNote", "path": "/home/kavia/workspace/code-generation/simple-notes-application-45717-45726/notes_backend/src/services/notes.js", "pattern": "/^function createNote(payload) {$/", "language": "JavaScript", "kind": "function", "signature": "(payload)"}, {"_type": "tag", "name": "createdAt", "path": "/home/kavia/workspace/code-generation/simple-notes-application-45717-45726/notes_backend/src/services/notes.js", "pattern": "/^    createdAt: now,$/", "language": "JavaScript", "kind": "property", "scope": "createNote.note", "scopeKind": "class"}, {"_type": "tag", "name": "deleteNote", "path": "/home/kavia/workspace/code-generation/simple-notes-application-45717-45726/notes_backend/src/services/notes.js", "pattern": "/^function deleteNote(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "ensureDataDir", "path": "/home/kavia/workspace/code-generation/simple-notes-application-45717-45726/notes_backend/src/services/notes.js", "pattern": "/^function ensureDataDir() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fs", "path": "/home/kavia/workspace/code-generation/simple-notes-application-45717-45726/notes_backend/src/services/notes.js", "pattern": "/^const fs = require('fs');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getNote", "path": "/home/kavia/workspace/code-generation/simple-notes-application-45717-45726/notes_backend/src/services/notes.js", "pattern": "/^function getNote(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-notes-application-45717-45726/notes_backend/src/services/notes.js", "pattern": "/^    id: randomUUID(),$/", "language": "JavaScript", "kind": "property", "scope": "createNote.note", "scopeKind": "class"}, {"_type": "tag", "name": "listNotes", "path": "/home/kavia/workspace/code-generation/simple-notes-application-45717-45726/notes_backend/src/services/notes.js", "pattern": "/^  listNotes,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "listNotes", "path": "/home/kavia/workspace/code-generation/simple-notes-application-45717-45726/notes_backend/src/services/notes.js", "pattern": "/^function listNotes() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "loadNotes", "path": "/home/kavia/workspace/code-generation/simple-notes-application-45717-45726/notes_backend/src/services/notes.js", "pattern": "/^function loadNotes() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-45717-45726/notes_backend/src/services/notes.js", "pattern": "/^  const note = {$/", "language": "JavaScript", "kind": "class", "scope": "createNote", "scopeKind": "class"}, {"_type": "tag", "name": "path", "path": "/home/kavia/workspace/code-generation/simple-notes-application-45717-45726/notes_backend/src/services/notes.js", "pattern": "/^const path = require('path');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "saveNotes", "path": "/home/kavia/workspace/code-generation/simple-notes-application-45717-45726/notes_backend/src/services/notes.js", "pattern": "/^function saveNotes(notes) {$/", "language": "JavaScript", "kind": "function", "signature": "(notes)"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-application-45717-45726/notes_backend/src/services/notes.js", "pattern": "/^    title: payload.title.trim(),$/", "language": "JavaScript", "kind": "property", "scope": "createNote.note", "scopeKind": "class"}, {"_type": "tag", "name": "updateNote", "path": "/home/kavia/workspace/code-generation/simple-notes-application-45717-45726/notes_backend/src/services/notes.js", "pattern": "/^function updateNote(id, payload) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, payload)"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/simple-notes-application-45717-45726/notes_backend/src/services/notes.js", "pattern": "/^    updatedAt: now,$/", "language": "JavaScript", "kind": "property", "scope": "createNote.note", "scopeKind": "class"}, {"_type": "tag", "name": "validateNotePayload", "path": "/home/kavia/workspace/code-generation/simple-notes-application-45717-45726/notes_backend/src/services/notes.js", "pattern": "/^function validateNotePayload(payload, isUpdate = false) {$/", "language": "JavaScript", "kind": "function", "signature": "(payload, isUpdate = false)"}], "hash": "7ef982f2e9617b2fa6b10a9a0ca5cfbc", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/services/notes.js", "fields": [{"name": "content: payload.content,", "scope": "createNote.note", "scopeKind": "class", "description": "unavailable"}, {"name": "createdAt: now,", "scope": "createNote.note", "scopeKind": "class", "description": "unavailable"}, {"name": "id: randomUUID(),", "scope": "createNote.note", "scopeKind": "class", "description": "unavailable"}, {"name": "listNotes,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}, {"name": "title: payload.title.trim(),", "scope": "createNote.note", "scopeKind": "class", "description": "unavailable"}, {"name": "updatedAt: now,", "scope": "createNote.note", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"27": ""}]}